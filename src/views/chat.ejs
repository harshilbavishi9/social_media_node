<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="../css/style.css" />
</head>

<body>
  <div class="container">
    <div class="row">
      <!-- User List Section -->
      <div class="w-4">
        <div class="user-list">
          <h2>Chat Users</h2>
          <div class="search">
            <input type="text" placeholder="Search" />
          </div>
          <ul class="user-items">
            <% for (var user of data) { %>
              <li class="user-item" onclick="openChatBox('<%= JSON.stringify(user) %>')">
                <img src="<%= user.image %>" alt="avatar" class="user-avatar" />
                <div class="user-info">
                  <div class="user-name">
                    <%= user.username %>
                  </div>
                  <div class="user-status online">Online</div>
                </div>
              </li>
              <% } %>
          </ul>
        </div>
      </div>

      <!-- Chat Box Section -->
      <div class="w-6">
        <div class="boxes" id="chat-box" style="display: none">
          <div class="new-chat-header">
            <img src="" id="chat-image" class="user-img" alt="new-avatar" />
            <div class="new-chat-info">
              <div class="new-chat-with" id="chat-username">John Doe</div>
            </div>
            <span class="chat-close" onclick="closeChatBox()">&times;</span>
          </div>

          <div class="chat-container">
            <div class="chat-history">
              <ul>
                <div id="chat-boxes" class="py-3" style="height: 600px; overflow-y: auto">
                  <ul id="chats" class="mb-0 px-5"></ul>
                </div>
              </ul>
            </div>

            <div class="chat-input">
              <form id="form">
                <input type="text" id="msg" name="msg" placeholder="message " />
              </form>
            </div>
          </div>
        </div>
        <!-- <div class="card chat">
            <div class="card-header">
              One of three columns
            </div>
            <div class="card-body py-0">
              chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>chat<br>
          
            </div>
            <div class="card-footer">
              One of three columns
            </div>
          </div> -->
      </div>
    </div>
  </div>
  <script>

    function openChatBox(data) {
      const userData = JSON.parse(data);
      document.getElementById("chat-username").innerText = userData.username;
      document.getElementById("chat-image").src = userData.image;
      document.getElementById("chat-box").style.display = "block";
    }

    function closeChatBox() {
      document.getElementById("chat-box").style.display = "none";
    }

    // function sendMessage() {
    //   const message = document.getElementById("msg").value;
    //   socket.emit("chat message", message);
    // }

    // function receiveMessage(sender, message) {
    //   var chatsContainer = document.getElementById("chats");
    //   var newMessage = document.createElement("li");
    //   newMessage.textContent = sender + ": " + message;
    //   chatsContainer.appendChild(newMessage);

    //   // Scroll to the bottom of the chat history
    //   chatsContainer.scrollTop = chatsContainer.scrollHeight;
    // }
  </script>
</body>

</html>